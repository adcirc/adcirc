

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributing &mdash; ADCIRC  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=e1954242" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Theory and Formulation" href="../theory/index.html" />
    <link rel="prev" title="Getting Started" href="../getting_started/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ADCIRC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction/what_is_adcirc.html">What is ADCIRC?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#authors">Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#maintainer">Maintainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#development-strategy">Development Strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Theory:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../theory/index.html">Theory and Formulation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/compiling.html">Compiling ADCIRC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/running_adcirc/index.html">Running ADCIRC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/model_configuration/index.html">Model Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/special_features/index.html">Special Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/tips_and_tricks/index.html">Tips and Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/examples/index.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Reference:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../technical_reference/all_files.html">All Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical_reference/input_files/index.html">Input Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical_reference/output_files/index.html">Output Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical_reference/parameter_definitions/index.html">Parameter Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical_reference/executables.html">Executables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical_reference/architecture/code_architecture.html">Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../questions_and_support/index.html">Questions and Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About This Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ADCIRC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Contributing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/contributing/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Link to this heading"></a></h1>
<section id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Joannes Westerink</p></li>
<li><p>Rick Luettich</p></li>
</ul>
</section>
<section id="maintainer">
<h2>Maintainer<a class="headerlink" href="#maintainer" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Zach Cobell, &lt;<a class="reference external" href="mailto:zcobell&#37;&#52;&#48;thewaterinstitute&#46;org">zcobell<span>&#64;</span>thewaterinstitute<span>&#46;</span>org</a>&gt;</p></li>
</ul>
</section>
<section id="development-strategy">
<h2>Development Strategy<a class="headerlink" href="#development-strategy" title="Link to this heading"></a></h2>
<p>The ADCIRC development strategy consists of the maintenance of two separate versions at any given time:
the stable version and the development version. The stable version only receives bug fixes, while the
development version receives bug fixes as well as new features.</p>
<p>At some point, the development version becomes stable. At that time, a stable branch is created from it,
and then new features are added to the previously stable code, creating a new development version.
A tag will be applied to the development version of the code in the form <code class="docutils literal notranslate"><span class="pre">v49-dev</span></code> in order to act
as a marker for the start of development of a new version. Stable versions of the code will have a tag
applied using semantic versioning.</p>
<section id="branching-strategy">
<h3>Branching Strategy<a class="headerlink" href="#branching-strategy" title="Link to this heading"></a></h3>
<p>Apart from work branches, the branching strategy is as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">main</span></code> - the main branch of the repository. This branch should always be in a working state.
It considered the bleeding edge of development</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vXXRelease</span></code> - the stable branch for version XX of the code. This branch should only receive bug fixes.</p></li>
</ul>
<p>We ask that contributors name their branches in the form:
<code class="docutils literal notranslate"><span class="pre">&lt;your_username&gt;/&lt;feature_name&gt;</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">zcobell/bugfix-1234</span></code></p>
</section>
<section id="considerations">
<h3>Considerations<a class="headerlink" href="#considerations" title="Link to this heading"></a></h3>
<p>Please consider the following when conducting development on the ADCIRC code base:</p>
<ol class="arabic">
<li><p>You should regularly keep your code up to date with the main branch. To do this, you should rebase from the
main branch. This will also ensure a linear history. Use the following command to rebase from the main branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>fetch<span class="w"> </span>origin<span class="w">  </span><span class="c1"># Assuming origin is the remote name for https://github.com/adcirc/adcirc</span>
git<span class="w"> </span>rebase<span class="w"> </span>origin/main
</pre></div>
</div>
<p>Code must have a linear history in order to be merged into the main branch. If your branch becomes extremely out
of date with the main branch, you will likely encounter merge conflicts here, and these conflicts are best resolved
by the developer submitting the pull request than the maintainer of the main branch.</p>
</li>
<li><p>When you are ready to merge your branch into the main branch, you should use a pull request. This will allow
the code to be reviewed by other developers before it is merged into the main branch. This will also allow the
code to be tested by the continuous integration system.</p></li>
<li><p>If you are submitting a bug fix, you should also submit a pull request to the stable branch (i.e. <code class="docutils literal notranslate"><span class="pre">vXXRelease</span></code>)
once it is accepted into the main branch. This will allow the bug fix to be incorporated into the next minor release.</p></li>
<li><p>Pull requests should be submitted against the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch. Prior ADCIRC development has maintained a <code class="docutils literal notranslate"><span class="pre">main</span></code> and
<code class="docutils literal notranslate"><span class="pre">development</span></code> branch, however, in practical use, it seems that only the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch in addition to the release branches
are necessary.</p></li>
<li><p>Pull requests for new features will not be accepted without an acceptance test. This test can be included in the pull
request and should be briefly described in the pull request description, including what the expected result should be. The
acceptance test should run in a few minutes on a single core of a modern desktop computer. If the test takes longer than
this, it will not be viable to run within the continuous integration system.</p></li>
</ol>
</section>
<section id="coding-standards">
<h3>Coding Standards<a class="headerlink" href="#coding-standards" title="Link to this heading"></a></h3>
<p>ADCIRC has had many individual contributors and has received code accretions over many years. As such,
the code base has accrued many different styles. The goal of the standards below should be applied to newly
contributed code such that over time we can move in the direction of a preferred style.</p>
<section id="file-naming">
<h4>File Naming<a class="headerlink" href="#file-naming" title="Link to this heading"></a></h4>
<p>All new files should be named using a <code class="docutils literal notranslate"><span class="pre">.F90</span></code> extension where historically we have used a <code class="docutils literal notranslate"><span class="pre">*.F</span></code> extension.
There are multiple reasons for this. First, the code style in the older portions of the code are a mix of
fixed and free form Fortran and don’t adhere to any specific standard. To move toward a more modern Fortran
style and clearly communicate the expectations, contributors should use the <code class="docutils literal notranslate"><span class="pre">.F90</span></code> extension. Second,
this allows us to use the extension as a marker for new code which can be subject to additional linting
and compiler checks.</p>
</section>
<section id="fortran-standards">
<h4>Fortran Standards<a class="headerlink" href="#fortran-standards" title="Link to this heading"></a></h4>
<p>The ADCIRC code base has historically been written in a mix of Fortran 77 and Fortran 90, requiring
compiler flags to allow for the use of both. The goal of the ADCIRC development team is to move toward
more modern Fortran standards, and we specifically name Fortran 2008 as our target. However, the legacy
portions of the code are large, and it will take time to move toward this goal. As such, we will enforce
this guideline only for new code.</p>
</section>
<section id="documentation">
<h4>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h4>
<p>All new code should be documented using Doxygen style comments. The benefits to this are the inline
documentation can be converted to a manual for developers in time and there is a defined style for
documentation that is easy to follow.</p>
</section>
<section id="pre-commit">
<h4>Pre-Commit<a class="headerlink" href="#pre-commit" title="Link to this heading"></a></h4>
<p>A series of linting and formatting tools are run using the <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> package.
The rules are defined in the <code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code> file in the root of the repository.</p>
<p>You can configure <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> to run the linter on every commit automatically before every commit by installing
the <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> hooks using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit<span class="w"> </span>install
</pre></div>
</div>
<p>Alternatively, you can run the linter manually using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit<span class="w"> </span>run<span class="w"> </span>--all
</pre></div>
</div>
<p>When a pull request is submitted, all pre-commit hooks will run and the pull request will be blocked
until all hooks pass.</p>
</section>
<section id="fortitude">
<h4>Fortitude<a class="headerlink" href="#fortitude" title="Link to this heading"></a></h4>
<p>We have developed a set of Fortran linting rules using the <code class="docutils literal notranslate"><span class="pre">fortitude</span></code> package. Fortitude is a Fortran linter
based on the Python Ruff linter. The rules can be enforced and some can be automatically fixed. Note that because
there are large amounts of legacy code, the linter will only run for <code class="docutils literal notranslate"><span class="pre">*.F90</span></code> files.</p>
<p>Some of the basic guidelines that Fortitude enforces are:</p>
<ul class="simple">
<li><p>Required intent for function arguments</p></li>
<li><p>Required <code class="docutils literal notranslate"><span class="pre">IMPLICIT</span> <span class="pre">NONE</span></code> in all subroutines</p></li>
<li><p>Required module default access specifier. Note that our own guideline is that ALL modules should be <code class="docutils literal notranslate"><span class="pre">private</span></code> by default.</p></li>
</ul>
</section>
<section id="additional-pre-commit-hooks">
<h4>Additional pre-commit hooks<a class="headerlink" href="#additional-pre-commit-hooks" title="Link to this heading"></a></h4>
<p>We also run additional hook on the code base such as:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">end-of-file-fixer</span></code> - ensures that the file ends with a newline</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mixed-line-ending</span></code> - ensures that the file uses the same line ending style throughout</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake-format</span></code> - formats CMake files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fprettify</span></code> - formats Fortran files in a consistent style</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ruff-format</span></code> - formats Python files in a consistent style</p></li>
</ul>
</section>
<section id="compiler-warnings-and-developer-mode">
<h4>Compiler Warnings and Developer Mode<a class="headerlink" href="#compiler-warnings-and-developer-mode" title="Link to this heading"></a></h4>
<p>Compilers can be configured to provide warnings about code that is not standard compliant,
does not follow best practices, may not do what you expect, or does not follow certain good
programming practices. The CMake build system has been configured to use have a “developer mode”
where the GNU compiler suite will compile with maximum warnings, all of which are treated as
errors. Note that we do not have the same level of strictness with third party code that is built
within ADCIRC since we do not control that code, however, the ADCIRC code should compile warning
free with the maximum set of warnings. These checks will be run as part of the continuous integration
system and will block the pull request until all warnings are resolved.</p>
<p>The warnings that are enabled in developer mode are:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-Werror
-Wall
-Wextra
-pedantic
-fimplicit-none
-Wconversion
-Wconversion-extra
-Wuninitialized
-Wsurprising
-Wuse-without-only
-Wimplicit-procedure
-Winteger-division
</pre></div>
</div>
<p>You can enable developer mode when working with the GNU compilers and the CMake build system by
adding the following to your CMake command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DADCIRC_DEVELOPER_MODE<span class="o">=</span>ON
</pre></div>
</div>
<p>Note that because there are many legacy portions of the code, these warnings are only enforced for
new <code class="docutils literal notranslate"><span class="pre">*.F90</span></code> files. The goal is that over time, we will slowly have more of the codebase passing these
strict warning checks.</p>
</section>
<section id="maintainability">
<h4>Maintainability<a class="headerlink" href="#maintainability" title="Link to this heading"></a></h4>
<p>It is very attractive to simply add new code either within a subroutine or function or
at the end or middle of an existing module. It is important to think about why you are
adding the code you are adding, and we encourage you to think about the modularity of any
change. In the general case, if you are adding a new behavior to the code for an existing
feature, this is likely a good candidate for a new subroutine or function. In the case that
you are adding a new feature, this is likely a good candidate for a new module.</p>
<p>In all cases, adding additional variables to the <code class="docutils literal notranslate"><span class="pre">GLOBAL</span></code> module is highly discouraged. By
adding variables to the <code class="docutils literal notranslate"><span class="pre">GLOBAL</span></code> module, you are more likely to create spooky action at a
distance, i.e., the values held in those variables can change due to things you can not
reason about in your local view of the code, and thus will be more challenging to understand.
Instead, you should  consider passing variables to subroutines and  functions as arguments.
Compilers are quite good at optimizing this and the performance impact is negligible.
Additionally, just because  the variables are not within the <code class="docutils literal notranslate"><span class="pre">GLOBAL</span></code> module, but in some other
module instead, does not mean that they are not global in their scope. We recommend that
when you need to maintain a state variable, you should consider using a data structure or
derived type rather than pointing at a variable in some global scope or other module.</p>
<p>Lastly, we ask developers to adhere to the DRY principle, i.e., Don’t Repeat Yourself. If
you find yourself feeling the urge to copy and paste code, or copy and paste code even if
it requires a small to medium-sized change, that’s typically a sign that you should be
creating a new subroutine or function. This will help to keep the code base
clean and maintainable. If you find yourself needing similar functionality in multiple modules,
consider that this is a good candidate for the start of a new module which might encompass
other pieces of functionality as well.</p>
<p>Please follow the good boy scouts rule and leave the code cleaner than you found it.</p>
</section>
</section>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Link to this heading"></a></h2>
<p>ADCIRC has a long history of development and was developed long before modern coding practices of unit testing.
As a result, the code was not necessarily developed to be unit-testable. Therefore, ADCIRC uses a test method
approximately called “approval testing.” ADCIRC runs a suite of tests located in the testing
<a class="reference external" href="https://github.com/adcirc/adcirc-testsuite">repository</a>. These tests are run for any pull request to the code
and verify that the solution has not changed outside of minor differences due to compiler differences. The test
suite uses a docker container available on Docker Hub (<code class="docutils literal notranslate"><span class="pre">adcircorg/adcirc-ci:2025.0.2</span></code>).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../getting_started/index.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../theory/index.html" class="btn btn-neutral float-right" title="Theory and Formulation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>